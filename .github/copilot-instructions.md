# Project Overview

This is a discord bot with name of "Annie". Primarily built using discord.js as the core framework.
The bot is a half multi-purpose with commands and features such as server economy (using Artcoins as currency), level ranking system, server shop, custom items, custom server welcomer messages and many others.
It uses PostgreSQL as the primary database to store user and discord server-specific configurations data, as well using Redis for caching static data that rarely updated in PostgreSQL. Also primarily using Redis to handle the cooling-down time for each user after using commands; as a way to rate-limit the usage.

## Folder Structure

- `/src`: Contains the source code for the bot and whole features
  - `/commands`: Discord slash and message commands
  - `/events`: Discord.js event handlers
  - `/libs`: Core utilities and services
  - `/utils`: Helper functions and tools
- `/tests`: Contains the unit-tests and integration-tests of Annie's features
- `/docs`: Contains legal documentation for the Annie's project
- `/assets`: Contains all the user-uploaded images such as user's profile cover, welcomer, and other small internal UI assets. Labeled with UUID
- `/logs`: Contains the logs rotation generated by Pino framework. Stored as .json

## Libraries and Frameworks

- Discord.js v14+ for the primary core framework in building the bot
- Node.js and Express for the server backend
- PostgreSQL for the primary data storage
- Redis for the caching storage
- Canvas for generating and displaying feature with custom UI such as profile and level card
- UUID for labeling unique files
- Chai, Mocha, and Sinon for unit and integration testing suite
- Pino for structured logging

## Coding Standards

- Avoid and never use semicolons at the end of each statement
- Use backticks ` for string-typed values
- Preferably always use async-await and try-catch block for promises
- Use camelCase for function, variables and method name
- Use UPPER_CASE for localization keys
- Use snake_case for labeling logger actions (e.g. `action_failed`)
- All functions should include JSDoc comments for parameters and return types
- Use structured logging with Pino instead of console.log/error
- Prefer const/let over var, use const by default
- Command files should export objects with standard properties: name, description, execute, etc.

## Error Handling

- Always use try-catch blocks for async operations
- Log errors with structured JSON data using Pino
- Provide graceful fallbacks for user-facing features
- Use appropriate HTTP status codes for API endpoints

## Testing Guidelines

- Write unit tests for all utility functions
- Mock external dependencies (Discord.js, PostgreSQL, Redis)
- Test both success and error scenarios
- Use descriptive test names that explain the expected behavior